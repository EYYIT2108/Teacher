:root{
  --bg1: #ffeef6;
  --bg2: #fff0f8;
  --accent: #ff67a1;
  --accent-2: #ffb2d1;
  --text: #4a2130;
  --muted: #7a4456;
  --sticker-bg: #fff;            /* white backing for stickers for contrast */
  --sticker-border: #ff9fc8;     /* pink outline */
  --radius: 16px;
  --max-width: 1200px;
  --transition: 360ms cubic-bezier(.2,.9,.3,1);
}

/* reset/base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:var(--text);background:linear-gradient(135deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}

/* home button */
.home{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:36px;text-align:center}
.big-cta{background:linear-gradient(180deg,var(--accent),#ff4d8b);color:white;border:none;padding:20px 28px;font-size:20px;border-radius:999px;box-shadow:0 18px 48px rgba(255,102,150,0.18);cursor:pointer;transition:transform 200ms ease}
.big-cta:active{transform:scale(.98)}
.hint{color:var(--muted);font-size:13px}

/* overlay */
.letter-page{position:fixed;inset:0;padding:28px;display:flex;flex-direction:column;opacity:0;pointer-events:none;transition:opacity 320ms ease;backdrop-filter: blur(6px);background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,240,247,0.02));overflow-y:auto;-webkit-overflow-scrolling:touch}
.letter-page[aria-hidden="false"]{opacity:1;pointer-events:auto}

/* topbar */
.topbar{display:flex;justify-content:flex-end}
.icon-btn{background:transparent;border:none;font-size:22px;padding:8px;border-radius:10px;cursor:pointer;color:var(--text)}

/* grid layout - left video, center letter, right gallery */
.letter-wrap{margin:18px auto;max-width:var(--max-width);display:grid;grid-template-columns: 180px 1fr 360px;gap:24px;align-items:start;width:100%;padding-bottom:36px}

/* small video column */
.video-col{display:flex;align-items:flex-start;justify-content:center}
.video-box{width:160px;background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,240,247,0.02));padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 10px 28px rgba(200,80,140,0.04)}
.video-title{font-size:13px;color:var(--muted);margin:6px 0}
video#heroVideo{width:100%;border-radius:10px;display:block;outline:none}

/* message panel (center) */
.message-panel{position:relative;background:linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));border-radius:14px;padding:26px;border:2px solid rgba(255,150,190,0.28);backdrop-filter: blur(10px);box-shadow:0 18px 60px rgba(200,90,140,0.07);overflow:visible;transform-origin:top center;transition: transform 700ms cubic-bezier(.2,.9,.25,1), box-shadow 420ms, opacity 320ms}
.message-panel::after{content:"";position:absolute;left:28px;right:28px;top:112px;bottom:28px;border-radius:12px;border:2px dashed rgba(255,160,195,0.35);pointer-events:none;box-shadow:0 8px 30px rgba(255,120,170,0.06);z-index:1}

/* envelope flap */
.envelope-flap{position:absolute;left:12px;right:12px;top:-6px;height:86px;background:linear-gradient(180deg,#ffdff0,#ffeef8);border-top-left-radius:14px;border-top-right-radius:14px;z-index:6;transform-origin:top center;transform:rotateX(-88deg) translateY(-6px);box-shadow:0 8px 30px rgba(255,120,170,0.08);transition:transform 620ms cubic-bezier(.2,.9,.25,1);pointer-events:none}
.letter-page.open .envelope-flap{transform:rotateX(0deg) translateY(0)}

/* sticker container (attached to panel). hidden until open */
.stickers{position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none;z-index:8;opacity:0;transform:translateY(8px) scale(.98);transition:opacity var(--transition), transform 620ms cubic-bezier(.2,.9,.25,1)}
.letter-page.open .stickers{opacity:1;transform:translateY(0) scale(1)}

/* center icon/backing style to be very visible on pink background */
.sticker{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:999px;background:var(--sticker-bg);border:2px solid var(--sticker-border);box-shadow:0 8px 24px rgba(200,70,120,0.14);padding:6px;overflow:hidden}
.sticker svg{width:100%;height:100%;display:block}

/* sticker positions & sizes (desktop) */
.cat-a{left:-26px;top:6px;width:92px;height:92px;transform:rotate(-6deg)}
.cat-b{right:-22px;top:12px;width:72px;height:72px;transform:rotate(8deg)}
.cat-c{left:18px;bottom:46px;width:60px;height:60px}
.bear-a{right:18px;bottom:90px;width:68px;height:68px}
.bear-b{left:12px;bottom:122px;width:56px;height:56px}
.f-a{right:46px;top:64px;width:48px;height:48px}
.f-b{left:86px;top:92px;width:44px;height:44px}
.f-c{right:108px;bottom:56px;width:52px;height:52px}
.rose{left:-6px;top:148px;width:64px;height:64px}
.tulip-p{right:-36px;top:148px;width:56px;height:56px}
.tulip-b{right:136px;top:18px;width:46px;height:46px}
.peng-a{left:42%;bottom:12px;width:58px;height:58px}
.peng-b{right:18%;bottom:14px;width:48px;height:48px}

/* simple bob animation for stickers so they feel alive */
.sticker{animation:breathe 5200ms ease-in-out infinite}
@keyframes breathe{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-6px) scale(1.02)}100%{transform:translateY(0) scale(1)}}

/* panel header & message content */
.panel-header{display:flex;align-items:center;gap:12px;z-index:7;position:relative}
.kawaii-cat{width:56px;height:56px;background:linear-gradient(180deg,#ffdff5,#ffe6f3);border-radius:999px;display:inline-block}
.title{margin:0;font-size:22px;color:#591f3b}
.message-content{font-size:15.5px;line-height:1.6;color:#4b2233;padding:8px 18px 26px 18px;border-radius:8px;min-height:220px;position:relative;z-index:5;background:transparent}
.message-content p{margin:10px 0}

/* gallery (right) */
.media-panel{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.12);backdrop-filter: blur(6px);box-shadow:0 8px 20px rgba(20,8,18,0.04)}
.media-title{margin:0 0 12px;font-size:15px;color:#5b2740}
.media-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.thumb-link{display:block;border-radius:12px;overflow:hidden}
.thumb{position:relative;border-radius:12px;overflow:hidden;background:rgba(255,255,255,0.02);padding:4px;transition:transform 240ms,box-shadow 240ms;display:block}
.thumb img{width:100%;height:110px;object-fit:cover;display:block;border-radius:10px}
.thumb:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(255,90,140,0.12)}
.media-note{font-size:13px;color:var(--muted);margin-top:12px}

/* photo icon badge (visible even on soft pink) */
.photo-icon{
  position:absolute;right:10px;bottom:10px;width:44px;height:44px;border-radius:999px;background:var(--sticker-bg);border:2px solid var(--sticker-border);display:flex;align-items:center;justify-content:center;box-shadow:0 8px 22px rgba(200,70,120,0.12);pointer-events:none}
.photo-icon::before{content:"";display:block;width:26px;height:26px;background-size:contain;background-repeat:no-repeat;opacity:0.98}
/* different icons via data attribute will be set by JS to background SVGs (see Teacher.js) */

/* particles (hearts/petals) layer */
.particle-layer{position:fixed;inset:0;pointer-events:none;z-index:1100;overflow:hidden}
.particle{position:absolute;width:12px;height:12px;opacity:0;transform-origin:center;animation:particleFall var(--d,2200ms) linear forwards}
@keyframes particleFall{0%{transform:translateY(-6vh) rotate(0deg) scale(.6);opacity:1}40%{opacity:1}100%{transform:translateY(120vh) rotate(720deg) scale(1.05);opacity:0}}

/* thank you footer */
.thanks{margin:18px auto 38px;max-width:var(--max-width);text-align:center;padding:18px;color:#6b2f45;font-size:18px}

/* opening state pop */
.letter-page.open .message-panel{transform:perspective(900px) rotateX(0deg) translateY(0);box-shadow:0 30px 90px rgba(200,80,140,0.12)}
.message-panel{transform:perspective(900px) rotateX(-8deg) translateY(8px)}

/* reveal-on-scroll helpers */
.reveal-on-scroll{opacity:0;transform:translateY(18px);transition:opacity 600ms ease, transform 600ms ease}
.revealed{opacity:1;transform:translateY(0)}

/* responsive adjustments (mobile ordering: letter, photos, video, thanks) */
@media (max-width:980px){
  .letter-wrap{grid-template-columns:1fr;gap:18px;padding-bottom:36px}
  .video-col{order:3;display:flex;justify-content:center}
  .message-panel{order:1}
  .media-panel{order:2}
  .video-box{width:100%;max-width:420px}
  video#heroVideo{height:220px;object-fit:cover}
  /* stickers scale down and reposition to avoid overflow */
  .cat-a{left:6px;top:-12px;width:72px;height:72px}
  .cat-b{right:6px;top:-8px;width:58px;height:58px}
  .cat-c{left:12px;bottom:28px;width:44px;height:44px}
  .bear-a{right:8px;bottom:84px;width:46px;height:46px}
  .bear-b{left:10px;bottom:100px;width:40px;height:40px}
  .f-a,.f-b,.f-c{width:34px;height:34px}
  .rose,.tulip-p,.tulip-b,.peng-a,.peng-b{width:40px;height:40px}
  .photo-icon{width:38px;height:38px;right:8px;bottom:8px}
  .thumb img{height:100px}
  .message-content{min-height:220px}
}

/* small focus outline */
.message-content:focus{outline:2px dashed rgba(255,120,160,0.25);outline-offset:6px}
